[
  {
    "id": "TIER001",
    "title": "Free Tier User - No Minimax TTS Access",
    "description": "Verify free tier user cannot access Minimax TTS features and sees appropriate restrictions",
    "category": "tier_access",
    "priority": "High",
    "user_tier": "free",
    "test_user": {
      "email": "free@test.com",
      "password": "TestFree123!",
      "user_id": "e42cc6d0-bf87-4a53-b445-7cf5ee0076b0"
    },
    "steps": [
      {
        "type": "action",
        "description": "Login as free tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Agent Setup page"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS voice options are NOT visible or disabled"
      },
      {
        "type": "assertion",
        "description": "Verify only default Vapi voices are available"
      },
      {
        "type": "action",
        "description": "Navigate to Voice Call Tester"
      },
      {
        "type": "assertion",
        "description": "Verify user can still initiate test calls with default voice"
      },
      {
        "type": "assertion",
        "description": "Check getUserTier() returns 'free'"
      }
    ]
  },
  {
    "id": "TIER002",
    "title": "Pro Tier User - Minimax TTS Access Enabled",
    "description": "Verify Pro tier user ($80) has access to Minimax TTS features",
    "category": "tier_access",
    "priority": "High",
    "user_tier": "pro",
    "test_user": {
      "email": "pro@test.com",
      "password": "TestPro123!",
      "user_id": "34a3c6db-1aa3-41fa-b1f3-7fbc06e83aeb"
    },
    "steps": [
      {
        "type": "action",
        "description": "Login as Pro tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Agent Setup page"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS voice options are visible and enabled"
      },
      {
        "type": "assertion",
        "description": "Verify canUseMinimaxTTS() returns true"
      },
      {
        "type": "action",
        "description": "Select a Minimax TTS voice (e.g., minimax-marcy)"
      },
      {
        "type": "action",
        "description": "Save agent configuration"
      },
      {
        "type": "assertion",
        "description": "Verify agent saves successfully with Minimax voice"
      },
      {
        "type": "action",
        "description": "Navigate to Voice Call Tester"
      },
      {
        "type": "assertion",
        "description": "Verify test call can be initiated with Minimax TTS"
      },
      {
        "type": "assertion",
        "description": "Check getUserTier() returns 'pro'"
      }
    ]
  },
  {
    "id": "TIER003",
    "title": "ProMax Tier User - Full Feature Access",
    "description": "Verify ProMax tier user ($180) has full access including Minimax TTS",
    "category": "tier_access",
    "priority": "High",
    "user_tier": "promax",
    "test_user": {
      "email": "promax@test.com",
      "password": "TestPromax123!",
      "user_id": "89d039d4-53b6-4a62-8a64-cfddaffee0f0"
    },
    "steps": [
      {
        "type": "action",
        "description": "Login as ProMax tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Agent Setup page"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS voice options are visible and enabled"
      },
      {
        "type": "assertion",
        "description": "Verify all voice options including custom Minimax voices are available"
      },
      {
        "type": "action",
        "description": "Configure agent with Minimax TTS voice"
      },
      {
        "type": "assertion",
        "description": "Verify agent configuration saves successfully"
      },
      {
        "type": "action",
        "description": "Initiate voice call test"
      },
      {
        "type": "assertion",
        "description": "Verify call uses Minimax TTS voice successfully"
      },
      {
        "type": "assertion",
        "description": "Check getUserTier() returns 'promax'"
      },
      {
        "type": "assertion",
        "description": "Verify isPaidTier() returns true"
      },
      {
        "type": "assertion",
        "description": "Verify canUseMinimaxTTS() returns true"
      }
    ]
  },
  {
    "id": "TIER004",
    "title": "Tier Detection - Payment Amount Mapping",
    "description": "Verify tier detection correctly maps payment amounts to tiers",
    "category": "tier_detection",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Query payments table for test users"
      },
      {
        "type": "assertion",
        "description": "Verify free@test.com has no successful payment → tier = 'free'"
      },
      {
        "type": "assertion",
        "description": "Verify pro@test.com has $80 payment → tier = 'pro'"
      },
      {
        "type": "assertion",
        "description": "Verify promax@test.com has $180 payment → tier = 'promax'"
      },
      {
        "type": "assertion",
        "description": "Verify payment status = 'successful' for paid tiers"
      },
      {
        "type": "assertion",
        "description": "Verify getUserTier() correctly queries payments table"
      }
    ]
  },
  {
    "id": "TIER005",
    "title": "Tier-Based Feature Gating - Agent Setup",
    "description": "Verify agent setup page shows/hides features based on user tier",
    "category": "feature_gating",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as free tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Agent Setup"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS section is hidden or shows upgrade prompt"
      },
      {
        "type": "action",
        "description": "Logout and login as Pro tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Agent Setup"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS section is visible and functional"
      },
      {
        "type": "action",
        "description": "Logout and login as ProMax tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Agent Setup"
      },
      {
        "type": "assertion",
        "description": "Verify all features including advanced Minimax options are available"
      }
    ]
  },
  {
    "id": "TIER006",
    "title": "Tier Upgrade Flow - Payment to Feature Access",
    "description": "Verify that after payment is recorded, user immediately gets access to paid tier features",
    "category": "tier_upgrade",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Login as free tier user"
      },
      {
        "type": "assertion",
        "description": "Verify current tier is 'free'"
      },
      {
        "type": "action",
        "description": "Check that Minimax TTS is not accessible"
      },
      {
        "type": "action",
        "description": "Create payment record for $80 via upgrade script"
      },
      {
        "type": "action",
        "description": "Refresh page or re-check tier"
      },
      {
        "type": "assertion",
        "description": "Verify getUserTier() now returns 'pro'"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS features become accessible"
      },
      {
        "type": "assertion",
        "description": "Verify canUseMinimaxTTS() returns true"
      }
    ]
  },
  {
    "id": "TIER007",
    "title": "Voice Call Testing - Tier Restrictions",
    "description": "Verify voice call testing respects tier restrictions",
    "category": "voice_testing",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as free tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Voice Call Tester"
      },
      {
        "type": "assertion",
        "description": "Verify can initiate test calls with default Vapi voice"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax voice options are not available"
      },
      {
        "type": "action",
        "description": "Logout and login as Pro tier user"
      },
      {
        "type": "action",
        "description": "Navigate to Voice Call Tester"
      },
      {
        "type": "assertion",
        "description": "Verify Minimax TTS voice options are available"
      },
      {
        "type": "action",
        "description": "Initiate test call with Minimax voice"
      },
      {
        "type": "assertion",
        "description": "Verify call connects and uses Minimax TTS successfully"
      }
    ]
  },
  {
    "id": "TIER008",
    "title": "API Rate Limiting - Free Tier",
    "description": "Verify free tier users are subject to rate limiting",
    "category": "rate_limiting",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Login as free tier user"
      },
      {
        "type": "action",
        "description": "Make 100 API requests within one hour"
      },
      {
        "type": "assertion",
        "description": "Verify first 100 requests succeed"
      },
      {
        "type": "action",
        "description": "Make 101st API request"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 429 Too Many Requests error"
      },
      {
        "type": "action",
        "description": "Logout and login as Pro tier user"
      },
      {
        "type": "action",
        "description": "Make 101+ API requests"
      },
      {
        "type": "assertion",
        "description": "Verify paid tier has no rate limiting (or higher limit)"
      }
    ]
  },
  {
    "id": "TIER009",
    "title": "Payment Record Verification",
    "description": "Verify payment records exist and are correctly formatted",
    "category": "data_verification",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Query payments table for pro@test.com"
      },
      {
        "type": "assertion",
        "description": "Verify payment record exists with user_id matching pro@test.com"
      },
      {
        "type": "assertion",
        "description": "Verify payment amount = 80"
      },
      {
        "type": "assertion",
        "description": "Verify payment status = 'successful'"
      },
      {
        "type": "action",
        "description": "Query payments table for promax@test.com"
      },
      {
        "type": "assertion",
        "description": "Verify payment record exists with amount = 180"
      },
      {
        "type": "assertion",
        "description": "Verify payment status = 'successful'"
      },
      {
        "type": "action",
        "description": "Query payments table for free@test.com"
      },
      {
        "type": "assertion",
        "description": "Verify no successful payment record exists"
      }
    ]
  }
]

